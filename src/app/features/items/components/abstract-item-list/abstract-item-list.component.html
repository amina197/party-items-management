<app-shared-table [columns]="columns">
  @for (item of filteredItems(); track item.id) {

    <tr (click)="openItemDetails(item)"
        class="clickable-row"
    >
      @for (col of columns; track col.field) {
        <td [style.width]="col.width || 'auto'">

          @switch (col.field) {
            @case ('totalCost') {
              {{ item[col.field] }}â‚¬
            }

            @case ('owners') {
              @for (owner of item.owners; track owner.id) {
                <span class="owner-badge">
                  {{ owner.name }}
                </span>
              }
            }

            @case ('status') {
              <span class="status-badge" [ngClass]="item.status | itemStatusToClass">
                {{ item.status }}
              </span>
            }

            @default {
              {{ item[col.field] }}
            }
          }
        </td>
      }
    </tr>
  }
</app-shared-table>


@if (showSidePanel && selectedItem) {
  <div class="side-panel">
    <app-item-detail-side-panel
      [item]="selectedItem"
      [activeUser]="activeUser()"
      [ownerId]="ownerId()"
      (closePanel)="closeSidePanel()"
    ></app-item-detail-side-panel>
  </div>
}
